{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\"\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst API_KEY = \"51465381-3669693f35fe6c0ef244a196a\"\nconst BASE_URL = 'https://pixabay.com/api/'\n\n\nexport async function getImagesByQuery(query, page = 1) {\n    try {\n    const res = await axios.get('https://pixabay.com/api/', {\n        params:{\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: page,\n        per_page: 15,\n        \n        }\n      \n        \n    });\n  console.log(res.data);\n    const {hits, totalHits} = res.data\n    \n        if(hits.length === 0) {\n            iziToast.show({\n    title: 'Ой, що це коїться???',\n    message: 'Sorry, there are no images matching your search query. Please try again!',\n    color: 'red',  \n    position: 'topRight',\n\n});\nreturn[];\n        }\n        return {hits, totalHits};\n        \n    } catch(error) {\n        console.log(error);\n        \n    }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n  captions: true,\n  \n  captionDelay: 250,\n});\n\nconst galleryContainer = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".loadMoreBtn\");\n\n\n\nexport function createGallery(images) { \n    const markUp = images\n    .map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => {\n\n                return`\n                <div class=\"cards\">\n                <a href=\"${largeImageURL}\"> <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"card-image\"/></a>\n                <div class=\"commments\">\n                <div class=\"card-comment\">\n                <h2>Likes</h2>\n                <p>${likes}</p>\n                </div>\n\n                <div class=\"card-comment\">\n                <h2>Views</h2>\n                <p>${views}</p>\n                </div>\n\n                \n\n                <div class=\"card-comment\">\n                <h2>Comments</h2>\n                <p>${comments}</p>\n                </div>\n\n                <div class=\"card-comment\">\n                <h2>Downloads</h2>\n                <p>${downloads}</p>\n                \n                </div>\n                </div>\n                </div>\n                `\n                ;\n                }).join(\"\");\n               galleryContainer.insertAdjacentHTML(\"beforeend\", markUp);\n               lightbox.refresh();\n            } \n\n\n\n\n            export function clearGallery() {\n                galleryContainer.innerHTML= \"\";\n\n            }\n\n            export function showLoader() {\n                loader.classList.remove(\"hidden\")\n\n            }\n\n             export function hideLoader() {\n                loader.classList.add(\"hidden\");\n             }\n\n             export function showLoadMoreButton() {\n                loadMoreBtn.classList.remove(\"hidden\");\n\n             };\n\n             export function hideLoadMoreButton() {\n                loadMoreBtn.classList.add(\"hidden\");\n\n             }","import {getImagesByQuery} from './js/pixabay-api.js';\nimport {createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton} from './js/render-functions.js';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst form = document.querySelector(\".form\");\nconst input = document.querySelector('input[name=\"search-text\"]');\nconst button = document.querySelector('button[type=\"submit\"]');\nconst gallery = document.querySelector(\".gallery\");\nconst loadMoreBtn = document.querySelector(\".loadMoreBtn\");\nloadMoreBtn.classList.add(\"hidden\");\nlet currentQuery = \"\";\nlet currentPage = 1;\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", handlerSubmit);\nloadMoreBtn.addEventListener(\"click\", loadMoreImages);\n\n\nasync function handlerSubmit(event) {\n    event.preventDefault();\n    const query = input.value.trim();\n\n    if(query !== currentQuery) {\n        currentQuery = query;\n        currentPage = 1;\n        clearGallery();\n        hideLoadMoreButton();\n    }\n    if(query === \"\") {\n        iziToast.show({\n        title: 'Ой, що це коїться???',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        color: 'red',\n        position: 'topRight',\n    });\n        return;\n    } \n    clearGallery();\n    showLoader();\ntry{\n        const {hits, totalHits: newTotalHits} = await getImagesByQuery(query, currentPage);\n        \n        \n            if(hits.length === 0) {\n               iziToast.error ({\n                title: \"Немає результатів\",\n                message: `Зображень за Вашим запитом ${query} не знайдено `,\n                position: 'topRight',\n    \n\n               });\n               return;\n            } \n            createGallery(hits);\n            currentPage++;\n            totalHits = newTotalHits;\n            if (currentPage <= Math.ceil(totalHits / 15)) {\n                showLoadMoreButton();\n            } else {\n                hideLoadMoreButton();\n                iziToast.info({\n                    message: \"We're sorry, but you've reached the end of search results\",\n                    position: 'topRight',\n\n                });\n            }\n        } catch (error) {\n            iziToast.error({\n                message: \"Щось пішло не так при завантаженні зображень\",\n                position: 'topRight',\n            });\n        \n                console.log(error);\n                } finally {\n                    hideLoader();\n                }\n            }\n                \n           \n\n    async function loadMoreImages() {\n        showLoader();\n        try{\n\n        const {hits} = await getImagesByQuery(currentQuery, currentPage);\n        createGallery(hits);\n        currentPage++;\n\n        scroll();\n\n        \n\n        if(currentPage > Math.ceil(totalHits / 15)) {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n        }\n    } catch (error) {\n        iziToast.error({\n            message: \" Не вдалося завантажити більше зображень\",\n            position: \"topRight\",\n        });\n        console.log(error);\n        \n    } finally{\n        hideLoader();\n    }\n}\n\n\n\nfunction scroll() {\n  const card = document.querySelector(\".cards\");\n  if (card) {\n    const cardHeight = card.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: \"smooth\",\n    });\n  }\n}\n    "],"names":["API_KEY","getImagesByQuery","query","page","res","axios","hits","totalHits","iziToast","error","lightbox","SimpleLightbox","galleryContainer","loader","loadMoreBtn","createGallery","images","markUp","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","currentQuery","currentPage","handlerSubmit","loadMoreImages","event","newTotalHits","scroll","card","cardHeight"],"mappings":"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"}